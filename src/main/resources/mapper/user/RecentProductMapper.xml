<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.routy.routyback.mapper.user.mypage.RecentProductMapper">

    <!-- 최근 본 상품 조회 (최신순 10개) -->
    <select id="getRecentViewedProducts" resultType="com.routy.routyback.dto.user.mypage.RecentProductResponse">
        SELECT
        p.prdno AS productId,
        p.prdname AS title,
        p.prdimg AS image
        FROM VIEWED_PRODUCT vp
        JOIN PRODUCT p ON p.prdno = vp.prdno
        WHERE vp.userno = #{userNo}
        ORDER BY vp.vpregdate DESC
        FETCH FIRST 10 ROWS ONLY
    </select>

</mapper>